<?xml version="1.0" encoding="utf-8" ?>
<sqlMap namespace="PersonMap" >
	<resultMaps>
		<resultMap id="QueryBasePersonResult" class="PersonEntity">
			<result property="Id" column="id"/>
			<result property="Name" column="Name"/>
		</resultMap>

		<resultMap id="QueryPersonResult"  extends="QueryBasePersonResult" class="PersonModel">
		</resultMap>
		
		<resultMap id="QueryPagingPersonResult" class="PagingPersonModel" groupBy="RowTotal">
			<result property="RowTotal" column="RT222" type="int" dbType="NUMBER"/>
			<result property="Results" resultMapping="PersonMap.QueryPersonResult"/>
		</resultMap>
	</resultMaps>


	<statements>
		<select id="QueryPerson" resultMap="QueryPersonResult" parameterClass="PersonCriteria" >
			<![CDATA[  select * from person ]]>
			<dynamic prepend="WHERE">
				<isNotEmpty prepend="AND" property="Id">
					<![CDATA[id = #Id#]]>
				</isNotEmpty>
				<isNotEmpty prepend="AND" property="Name">
					<![CDATA[name = #Name#]]>
				</isNotEmpty>
			</dynamic>
		</select>

		<select id="QueryPagingPerson" resultMap="QueryPagingPersonResult" parameterClass="PersonCriteria">
			<include refid="BeginPageableSql" />
			<![CDATA[SELECT * FROM person]]>
			<dynamic prepend="WHERE">
				<isNotEmpty prepend="AND" property="Id">
					<![CDATA[id = #Id#]]>
				</isNotEmpty>
				<isNotEmpty prepend="AND" property="Name">
					<![CDATA[name = #Name#]]>
				</isNotEmpty>
			</dynamic>
			<dynamic prepend="ORDER BY">
				<isNotEmpty prepend="" property="OrderByClause">
					<![CDATA[$OrderByClause$]]>
				</isNotEmpty>
			</dynamic>
			<include refid="EndPageableSql" />
		</select>

	</statements>
</sqlMap>
